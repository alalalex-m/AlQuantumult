# 实验

[DES编码实验](#DES编码实验)·····[测验](#测验1)

[RSA编码实验](#RSA编码实验)](#DES编码实验)·····[测验](#测验2)

[Windows下IPSec VPN实验](#Windows下IPSecVPN实验)](#DES编码实验)·····[测验](#测验3)

[基于区块链技术的电子证照管理系统](#基于区块链技术的电子证照管理系统)](#DES编码实验)·····[测验](#测验4)

[Windows环境下配置基于Web的SSL连接](#Windows环境下配置基于Web的SSL连接)](#DES编码实验)·····[测验](#测验5)

[木马攻击实验](#木马攻击实验)](#DES编码实验)·····[测验](#测验6)

[数字水印攻击实验](#数字水印攻击实验)](#DES编码实验)·····[测验](#测验7)

[IdooFileEncryption文件加密实验](#IdooFileEncryption文件加密实验)](#DES编码实验)·····[测验](#测验8)

## DES编码实验

### 原理

在介绍DES密码之前，我们先来了解一下分组密码。

　　现代分组密码的研究始于20世纪70年代中期，至今已有20余年历史，分组密码是现代密码学的重要体制之一，具有加密速度快·安全性好·易于标准化等特点，广泛地应用于数据的保密传输·加密存储等场合，也可用于其他方面，如构造伪随机数生成器以及序列密码，消息认证码（MAC）等。

　　分组密码是将明文消息编码表示后的数字(简称明文数字)序列，划分成长度为n的组(可看成长度为n的矢量)，每组分别在密钥的控制下变换成等长的输出数字(简称密文数字)序列。而DES就是一种典型的分组密码

**1.加密技术的分类**

　　A. 对称加密技术

　　对称算法(symmetric algorithm)，有时又叫传统密码算法，就是加密密钥能够从解密密钥中推算出来，同时解密密钥也可以从加密密钥中推算出来。而在大多数的对称算法中，加密密钥和解密密钥是相同的。所以也称这种加密算法为秘密密钥算法或单密钥算法。它要求发送方和接收方在安全通信之前，商定一个密钥。对称算法的安全 性依赖于密钥，泄漏密钥就意味着任何人都可以对他们发送或接收的消息解密，所以密钥的保密性对通信性至关重要。

　　对称加密的优点在于算法实现后的效率高，速度快。对称加密的缺点在于密钥的管理过于复杂。如果任何一对发送方和接收方都有他们各自商议的密钥的话，那么很明显，假设有N个用户进行对称加密通信，如果按照上述方法，则他们要产生N(N-1)把密钥，每一个用户要记住或保留N-1把密钥，当N很大时，记住是不可能的，而保留起来又会引起密钥泄漏可能性的增加。常用的对称加密算法有DES，DEA等。

　　B. 非对称加密技术

　　非对称加密(dissymmetrical encryption)，有时又叫公开密钥算法(public key algorithm)。这种加密算法是这样设计的:用作加密的密钥不同于用作解密的密钥，而且解密密钥不能根据加密密钥计算出来(至少在合理假定的长时间 内)。之所以又叫做公开密钥算法是由于加密密钥可以公开，即陌生人可以得到它并用来加密信息，但只有用相应的解密密钥才能解密信息。在这种加密算法中，加密密钥被叫做公开密钥(public key)，而解密密钥被叫做私有密钥(private key)。

　　非对称加密的缺点在于算法实现后的效率低，速度慢。非对称加密的优点在于用户不必记忆大量的提前商定好的密钥，因为发送方和接收方事先根本不必商定密钥，发放方只要可以得到可靠的接收方的公开密钥就可以给他发送信息了，而且即使双方根本互不相识。但为了保证可靠性，非对称加密算法需要一种与之相配合使用的公开密钥管理机制，这种公开密钥管理机制还要解决其他一些公开密钥所带来的问题。常用的非对称加密算法有RSA等。

**2.DES介绍**

　　数据加密标准DES是由IBM公司研制的，1977年美国国家标准局批准它供非机密机构保密通信使用，它是一种典型的传统密码体制，它利用传统的换位和置换等加密方法，是目前最为常用的分组密码系统．DES是Data Encryption Standard（数据加密标准）的缩写。它是由IBM公司研制的一种加密算法，美国国家标准局于1977年公布把它作为非机要部门使用的数据加密标准，二十年来，它一直活跃在国际保密通信的舞台上，扮演了十分重要的角色。 

　　DES是一个分组加密算法，他以64位为分组对数据加密。同时DES也是一个对称算法：加密和解密用的是同一个算法。它的密匙长度是56位（因为每个第8 位都用作奇偶校验），密匙可以是任意的56位的数，而且可以任意时候改变。其中有极少量的数被认为是弱密匙，但是很容易避开他们。所以保密性依赖于密钥。 

**3.DES算法框架**

　　DES对64(bit)位的明文分组M进行操作，M经过一个初始置换IP置换成m0，将m0明文分成左半部分和右半部分m0=(L0，R0)，各32位 长。然后进行16轮完全相同的运算，这些运算被称为函数f，在运算过程中数据与密匙结合。经过16轮后，左，右半部分合在一起经过一个末置换，这样就完成了。 

　　在每一轮中，密匙位移位，然后再从密匙的56位中选出48位。通过一个扩展置换将数据的右半部分扩展成48位，并通过一个异或操作替代成新的32位数据， 在将其置换换一次。这四步运算构成了函数f。然后，通过另一个异或运算，函数f的输出与左半部分结合，其结果成为新的右半部分，原来的右半部分成为新的左半部分。将该操作重复16次，就实现了。

### 步骤

1. 在系统中打开文档进行代码的查看，在Linux系统命令行中输入vi desjiemi.py, 查看解密代码文件 系统显示出来的代码图[vi jiemi.py]如：

```
cd cryptography/DES
vi desjiemi.py
```

查看完毕后，我们点击Esc键并输入ZZ退出查看。

　　之后我们对这段代码进行验证：

　　输入clear进行清屏，之后输入以下代码查看到目录下有desjiami.py等三个python文件

```
ls
```

2. 执行程序，并使用DES密码进行加密和解密

　　2.1 进行测试程序是否能实现DES密码加密

　　首先我们来执行DES.py来验证加密过程，输入以下命令行：

```
python2 desjiami.py
```

为了方便，我们已经在代码中将所要加密的明文规定好了，输入命令回车运行以后，它会对输入的明文进行加密，得到如下结果：

```
76bb0ef997db0b29092cb2453f944008
```

3. 进行测试程序是否能实现DES密码解密，得到所要的明文：

　　为了方便，我们已经在代码中将所要解密的密文规定好了，输入命令回车运行以后，它会对输入的密文进行解密，得到如下结果：

```
python2 desjiemi.py
dfadasfda
```

验证加密过程

步骤3：安全性分析

　　DES在被采纳为标准之前，就遭到了严厉的批评，直至今日也未能平息。批评集中在两个方面：第一IBM公司最开始的Lucifer算法的密钥长度是128位，而DES却只有56位，人们担心密钥太短而不能抵抗穷举攻击；第二，DES的内部结构，S盒的设计标准被列入官方机密，所以，用户不能确信DES的内部结构有没有陷门，美国国家安全局可能利用这些陷门在没有秘钥的情况下解密。

　　尽管如此，DES已风行全球，在各领域特别是金融领域中发挥了极其重要的作用。DES原来预计的安全使用年限是到1992年，不过由于其本身设计精妙，同时还未出现更合适的替代品，1994年NIST决定将DES的联邦使用年限延长5年。但是随着计算能力的迅速提高，DES的密钥长度和分组长度开始显得过短，能够被穷举攻破。不过随着时间的发展，在DES之上又衍生出了三重DES，AES等等，仍然散发着强大的生命力。

### 测验1

1.【单选题】如果明文信息为‘ouhnkdawfe’，密钥为ds，使用DES加密算法，那么加密的结果是？

B、d72c6358272f42bbeb0b935e37af5222

1.【单选题】如果密文信息为‘d72c6358272f42bbeb0b935e37af5222’，密钥为ds，使用DES解密，那么最有可能的明文信息是？

A、ouhnkdawfe

1.【单选题】DES密码算法属于（）体系？

B、对称密码

2.【单选题】如果明文信息为‘ouhnkdawfe’，密钥为zw，使用DES加密算法，那么加密的结果是？

B、f06a131c15b8dfa26b86cfdd21dcbf1a

3.【单选题】如果明文信息为‘dfadasfda’，密钥为zw，使用DES加密，那么最有可能的密文信息是？

A、76bb0ef997db0b29092cb2453f944008

4.【单选题】DES密码算法中的有效密钥的长度为？

A、56

5.【单选题】DES密码算法中的初始密钥的长度为？

B、64

## RSA编码实验

### 原理

非对称密码

* 对称密码算法要求通信双方通过交换密钥实现使用同一个密钥，这在密钥管理、发布和安全性方面存在很多问题，而非对称密码算法解决了这个问题。非对称密码算法是指一个加密系统的加密密钥和解密密钥是不相同，或者说不能从其中一个推导出另一个。在非对称密码算法的两个密钥中，一个是用于加密的密钥，它是可以公开的称为公钥；另一个是用于解密的密钥，是保密的，称为私钥。非对称密码算法解决了对称密码体制中密钥管理的难题，并提供了对信息发送人的身份进行验证的手段，是现代密码学的最重要的发明和进展。

RSA编码密码原理

* RSA算法基于一个十分简单的数论事实：将两个大素数相乘十分容易，但是想要对其乘积进行因式分解却极其困难，因此可以将乘积公开作为加密密钥。RSA算法是第一个能同时用于加密和数字签名的算法，也易于理解和操作。RSA是被研究得最广泛的公钥算法，从提出到现今的三十多年里，经历了各种攻击的考验，逐渐为人们接受，普遍认为是目前最优秀的公钥方案之一。由于进行的都是大数计算，使得RSA最快的情况也比DES慢上好几倍，无论是软件还是硬件实现，速度一直是RSA的缺陷，一般来说只用于少量数据加密，RSA的速度比对应同样安全级别的对称密码算法要慢1000倍左右。
* （1）公钥
  * 选择两个互异的大素数p和q，n是二者的乘积，即n =pq使Φ(n)＝（p-1）(q-1)，Φ(n)为欧拉函数，随机选取正整数e使其满足gcd(e，Φ(n))=1即e和Φ(n)互质，则将(n，e)作为公钥。

* （2）私钥　　
  * 求出正数d使其满足e×d=1 modΦ(n)则将(n，d)作为私钥。

* （3）加密算法
  * 对于明文M由C=Me mod n得到密文C。

* （4）解密算法
  * 对于密文C由M=Cdmod n得到明文M如果窃密者获得了n，e和密文C为了破解密文他必须计算出私钥d为此需要先分解n为p和q为了提高破解难度，达到更高的安全性，一般商业应用要求n的长度不小于1024bit，更重要的场合不小于2048bit。
  * 加密解密算法的数学表达式为：
    * 加密： ci=miemodn(1≤i≤t)
    * 解密： mi=cidmodn(1≤i≤t)
* RSA算法缺点
  * 1）产生密钥很麻烦，受到素数产生技术的限制，因而难以做到一次一密。
  * 2）安全性，RSA的安全性依赖于大数的因子分解，但并没有从理论上证明破译RSA的难度与大数分解难度等价，而且密码学界多数人士倾向于因子分解不是NP问题。
  * 3）速度太慢，由于RSA 的分组长度太大，为保证安全性，n 至少也要600 bits以上，使运算代价很高，尤其是速度较慢，较对称密码算法慢几个数量级；且随着大数分解技术的发展，这个长度还在增加，不利于数据格式的标准化。

### 步骤

* 步骤1：查看RSA编码密码的源码

  * 运行代码RSA.py：

  * 我们可以在系统中打开文档进行代码的查看，在Linux系统命令行中输入vi RSA.py，系统显示出来的代码图［vi RSA.py］如：

    ```
    cd cryptography/RSA
    vi RSA.py
    ```

  * 查看完毕后，我们点击Esc键并输入ZZ退出查看。

    之后我们对这段代码进行验证：输入clear进行清屏，之后输入以下代码查看到目录下有一个RSA.py文件

    ```
    ls
    ```

* 步骤2：执行程序，并使用RSA编码密码进行加密和解密

  * 2.1 执行程序。

    * 首先我们来执行RSA.py来验证加密过程。在运行程序之前，我们首先要对我们所需要加密的明文进行相应的处理。

    * 因为RSA算法是对数字进行相应计算，他的理论依据是数论的欧拉定理，所以我们在想要将明文进行加密时，必须先将明文转换为相应的数字，同时选取相应的两个素数p和q和一个随机数e，用Euclid扩展算法来计算私钥d，但需要注意的是，p和q必为素数，随机整数e作为公钥，必须满足e和4（n）互素。

    * 下来进入到我们的算法举例：

    * 我们选取我们的明文hongyaa，随机设定他的代替数字为220（注意此处所选择的数字必须要比将来在算法涉及到的两素数p和q的相乘所得的数字小），此后我们选取素数p和q为13,17；e为11，来进行对私钥d的求解。

    * 输入以下命令行：

    * ```
      python2 RSA.py
      13
      17
      11
      220
      ```

* 步骤3：安全性分析

  * 在Diffie和Hellman提出共要密码体制的设想的两年里，先后有Merkle和Hellman共同提出的MH背包公钥密码系统，Rivest, Shamir, Adleman联合提出的简称为 RSA公钥密码系统。RSA虽然稍后于MH背包公钥密码系统，但他是第一个安全，实用的公钥密码算法，已经成为公钥密码算法的国际标准，是目前应用广泛的的公钥密码体制。RSA的基础是数论的欧拉定理，他的安全性依赖于大整数因子分解的困难性。RSA公钥密码体制既可用于加密，又可用于数字签名，且具有安全，易懂，易实现等特点。
  * RSA密码体制是目前为止最为成功的非对称密码算法，是在1977年Rivest、Shamir和Adleman提出的第一个比较完善的非对称密码算法。它的安全性是建立在“大数分解和素性检测"这个数论难题的基础上，即将两个大素数相乘在计算上容易实现，而将该乘积分解为两个大素数因子的计算量相当大。虽然的安全性还未能得到理论证明，但经过20多年的密码分析和攻击，迄今仍然被实践证明是安全的。正是基于这种理论，1978年出现了著名的RSA算法，它通常是先生成一对RSA 密钥，其中之一是保密密钥，由用户保存；另一个为公开密钥，可对外公开，甚至可在网络服务器中注册。为提高保密强度，RSA密钥至少为500位长，一般推荐使用1024 位。这就使加密的计算量很大。为减少计算量，在传送信息时，常采用传统加密方法与公开密钥加密方法相结合的方式，即信息采用改进的DES或IDEA对话密钥加密，然后使用RSA密钥加密对话密钥和信息摘要。对方收到信息后，用不同的密钥解密并可核对信息摘要，RSA密钥长度随着保密级别提高，增加很快。
  * 时至今日，只有短的RSA钥匙才可能被强力方式解破。到2008年为止，世界上还没有任何可靠的攻击RSA算法的方式。只要其密钥的长度足够长，用RSA加密的信息实际上是不能被解破的。但在分布式计算和量子计算机理论日趋成熟的今天，RSA加密安全性受到了挑战。不过量子计算机理论等仍在发展实践阶段，距离成型还为时尚早，所以RSA算法仍占据市场的很大部分。

### 测验2

1.【单选题】如果明文信息为'hongyaa'，替代数字为220，P和q分别为13,17，随机数e为11，使用RSA编码，加密，那么最有可能的密文信息是？ A, 220

1.【单选题】如果密文信息的替代数字为220，p和q分别为13,17，随机数e为11，使用RSA编码算法进行解密，那么最有可能的明文信息是？

A, hongyaa

1.【单选题】RSA公钥密码体质的基础是？ ◎ A、欧拉定理

2.【单选题】如果明文信息为'hongyaa'，替代数字为60，p和q分别为13,17，随机数e为11，使用RSA编码，加密，那么最有可能的密文信息是？

A, 83

3.【单选题】在RSA密码算法中，要求随机数e和由两个素数相乘所得公钥n必须满足什么条件？ ◎ A、互质

4.【单选题】经常被应用于数字签名的密码算法为？ ◎ A、RSA编码密码算法

5.【单选题】RSA编码密码算法的安全性依赖于？◎ B、大整数因子分解的困难性

## Windows下IPSecVPN实验

### 原理

1. **VPN概念**
   　　VPN 即虚拟专用网络 。虚拟专用网络功能是：在公用网络上建立专用网络，进行加密通讯。在企业网络中有广泛应用。VPN网关通过对数据包的加密和数据包目标地址的转换实现远程访问。VPN有多种分类方式，主要是按协议进行分类。VPN可通过服务器、硬件、软件等多种方式实现。VPN具有成本低，易于使用的特点。

2. ** VPN的意义**
   　　VPN属于远程访问技术，简单地说就是利用公用网络架设专用网络。例如某公司员工出差到外地，他想访问企业内网的服务器资源，这种访问就属于远程访问。在传统的企业网络配置中，要进行远程访问，传统的方法是租用DDN（数字数据网）专线或帧中继，这样的通讯方案必然导致高昂的网络通讯和维护费用。对于移动用户（移动办公人员）与远端个人用户而言，一般会通过拨号线路（Internet）进入企业的局域网，但这样必然带来安全上的隐患。
   　　让外地员工访问到内网资源，利用VPN的解决方法就是在内网中架设一台VPN服务器。外地员工在当地连上互联网后，通过互联网连接VPN服务器，然后通过VPN服务器进入企业内网。为了保证数据安全，VPN服务器和客户机之间的通讯数据都进行了加密处理。有了数据加密，就可以认为数据是在一条专用的数据链路上进行安全传输，就如同专门架设了一个专用网络一样，但实际上VPN使用的是互联网上的公用链路，因此VPN称为虚拟专用网络，其实质上就是利用加密技术在公网上封装出一个数据通讯隧道。有了VPN技术，用户无论是在外地出差还是在家中办公，只要能上互联网就能利用VPN访问内网资源，这就是VPN在企业中应用得如此广泛的原因。

3. **IPSec协议**
   　　IPSec实际上是一套协议包而不是单个的协议，IPSec是在IP网络上保证安全通信的开放标准框架，它在IP层提供数据源验证、数据完整性和数据保密性。其中比较重要的有RFC2409 IKE(Internet Key Exchange)互连网密钥交换、RFC2401 　　IPSec协议、RFC2402 AH(Authentication Header)验证包头、RFC2406 ESP (Encapsulating Security Payload)加密数据等协议。IPSec独立于密码学算法，这使得不同的用户群可以选择不同一套安全算法。网络安全IPSec 主要由AH(认证头)协议，ESP(封装安全载荷)协议以及负责密钥管理的IKE(因特网密钥交换)协议组成。AH 为IP 数据包提供无连接的数据完整性和数据源身份认证。
   　　数据完整性通过消息认证码(如MD5、SHA1)产生的校验值来保证，数据源身份认证通过在待认证的数据中加入一个共享密钥来实现。ESP 为IP 数据包提供数据的保密性(通过加密机制)、无连接的数据完整性、数据源身份认证以及防重防攻击保护。AH 和ESP 可以单独使用，也可以配合使用，通过组合可以配置多种灵活的安全机制。密钥管理包括IKE 协议和安全联盟SA(SecurityAssociation)等部分。IKE 在通信双方之间建立安全联盟，提供密钥确定、密钥管理机制，是一个产生和交换密钥材料并协商IPSec 参数的框架。IKE 将密钥协商的结果保留在SA 中，供AH 和ESP 通信时使用。

4. **ICMP**
   　　ICMP协议是一种面向无连接的协议，用于传输出错报告控制信息。它是一个非常重要的协议，它对于网络安全具有极其重要的意义。
   　　它是TCP/IP协议族的一个子协议，属于网络层协议，主要用于在主机与路由器之间传递控制信息，包括报告错误、交换受限控制和状态信息等。当遇到IP数据无法访问目标、IP路由器无法按当前的传输速率转发数据包等情况时，会自动发送ICMP消息。ICMP报文在IP帧结构的首部协议类型字段（Protocol 8bit)的值=1.
   　　ICMP包有一个8字节长的包头，其中前4个字节是固定的格式，包含8位类型字段，8位代码字段和16位的校验和；后4个字节根据ICMP包的类型而取不同的值。
   　　ICMP提供一致易懂的出错报告信息。发送的出错报文返回到发送原数据的设备，因为只有发送设备才是出错报文的逻辑接受者。发送设备随后可根据ICMP报文确定发生错误的类型，并确定如何才能更好地重发失败的数据包。但是ICMP唯一的功能是报告问题而不是纠正错误，纠正错误的任务由发送方完成。
   　　我们在网络中经常会使用到ICMP协议，比如我们经常使用的用于检查网络通不通的Ping命令（Linux和Windows中均有），这个“Ping”的过程实际上就是ICMP协议工作的过程。还有其他的网络命令如跟踪路由的Tracert命令也是基于ICMP协议的。

### 步骤

* 步骤1：在操作机Windows 7中，添加安全策略

　　1.1进入到操作机后，在Windows 7中选择“开始”，点击“运行”，输入命令“secpol.msc”，点击“确定”

　　1.2弹出本地安全策略后，选中“IP安全策略，在本地计算机”点击右键，“创新IP安全策略”

　　点击“下一步”；

　　1.3在名称处输入“honyaedu”，点击下一步：

　　选择激活默认响应规则，点击下一步

　　选择“使用此字符串保护密钥交换”，输入123654，下一步

　　选择“编辑属性”点击完成

　　1.4点击完成后，需要将“使用添加向导”勾选上，点击添加：

　　添加后点击下一步：

　　在本实验中，我们实现的是两台主机之间的IPSec安全隧道，而不是两个网络之间的安全通信，依次，我们选择“此规则不指定隧道”，即选用传输模式IPSec，选中后，点击“下一步”：

　　在选择网络类型界面。安全规则可以用到3种网络类型：所有网络连接、局域网（LAN）和远程访问。在本实验中，我们选择“所有网络连接”，单击“下一步”按钮：

　　1.5在IP筛选器列表界面。我们制定自己的筛选操作，点击“添加”按钮，进入“IP筛选器列表”界面；

　　新建的IP筛选器列表界面，名字我们就默认“新 IP筛选器列表”就可以，点击“添加”；

　　点击“下一步”按钮；

　　在“IP筛选器描述和镜像属性”的“描述”中，可自由添加对新增筛选器的解释信息，在这里我们输入“与同组主机进行安全的icmp通信”，点击“下一步”按钮；

　　IP通信源选择“我的IP地址”，单击“下一步”按钮；

　　IP通讯目标选择“任何IP地址”，点击“下一步”按钮；

　　选择“ICMP”协议类型，单击“下一步”按钮。点击“完成”按钮，完成定制IP筛选器；

　　操作界面返回到“安全规则向导”，点击“确定”按钮；

　　1.7我们选中刚才新建的“新IP筛选列表”，点击“下一步”。（注意这里我们创建的“新 IP筛选器列表”，我们需要选中，名称前面的圆要选中出黑点）

　　这里我们需要手动添加我们需要的“筛选器操作”，点击“添加”；点击“下一步”；

　　筛选器操作名称，这屋里我们设置成“需要安全”，点击“下一步”；

　　选择“协商安全”，点击“下一步”；

　　这里我们选择“不允许不安全的通信”，点击“下一步”，再点击”下一步“　

​	点击“完成”

　　1.8页面跳回到“安全规则向导”选择“需要安全”，点击下一步

　　选择“使用此字符串保护密钥交换”输入“123654”，点击“下一步”

　　这里不用选“编辑属性”，点击完成

　　确定

步骤2：在目标机Windows Server 2008 添加安全策略

　　2.1进入到目标机后，在Windows Server 2008中选择“开始”，点击“运行”

- 输入命令“secpol.msc”

　　点击“确定”：

　　2.2打开本地策略后，在“IP安全策略，在本地计算机”，右键“创建IP安全策略”。

　　2.3创建安全策略的步骤与2008配置步骤相同，以下就不在多讲，步骤如下截图。

　　注意这里我们创建的“新 IP筛选器列表”，我们需要选中，名称前面的圆要选中出黑点；

步骤3：策略验证

　　3.1我们检查一下操作机和目标机的IPSec服务是否开启，如没有开启需要开启一下，这里我们先看一下目标机Windows 2008，点击，我的“电脑”右键——计算机管理——服务和应用程序，如下图。

　　3.2操作机Windows 7的IPSec服务是否开启，点击“开始”，打开“运行”

- 输入命令services.msc，进入服务，开启ipsec服务；

　　3.3这里我们开始验证我们设置的策略是否生效，回到Windows 2008目标机，点击“开始”，打开“运行”，输入命令

- ping 192.168.15.22 -t

　　这里面ping的是操作机的IP即Windows 7的IP，可以ping通。

　　3.4 此时，我们进到操作机Windows 7上，将我们创建的hongyaedu安全策略右键，“分配”，我们会发现，ping不通了，超时。

　　3.5 我们把目标机Windows Server 2008创建的hongyaedu安全策略也分配，再观察是否能ping通；

　　此时能ping通了，我们配置的安全策略有效了，并且正在使用通信秘钥。

步骤4：网络抓包分析

　　4.1我们在我们的Windows7操作机系统上安装科来网络分析软件，进行抓包，来看一下操作机与目标机的密钥交换过程，这里就不在讲如何安装科来软件了，一直下一步就可以了，在实验目录下D:\1.信息安全\2、网络安全\06虚拟专用网(VPN）课程\2.Windows下IPSec VPN实验找到安装包csnas_tech_9.2.0.9258_x64，解压，自己安装后，打开，进行全面分析即可

### 测验3

1.【填空题】在科来软件截取的数据包可以发现，ipsec所用到的传输协议是？正确答案：ESP

1.【单选题】ICMP报文在IP帧结构的首部协议类型字段（Protocol 8bit)的值=?		A、1

2.【单选题】下面哪一种协议是一种面向无连接的协议，用于传输出错报告控制信息。它是一个非常重要的协议，它对于网络安全具有极其重要的意义。

D、ICMP

3.【单选题】IPSec 主要由哪些协议组成?

A、AH(认证头)协议

B、ESP(封装安全载荷)协议

C、负责密钥管理的IKE(因特网密钥交换)协议

D、以上都是

4.【单选题】下面哪个协议是为IP 数据包提供无连接的数据完整性和数据源身份认证的?

A、AH(认证头)协议

5.【单选题】下面那个协议是为IP 数据包提供数据的保密性(通过加密机制)、无连接的数据完整性、数据源身份认证以及防重防攻击保护的?

B、ESP(封装安全载荷)协议

## 基于区块链技术的电子证照管理系统

### 原理

**1.私有链：**

　　当今大多数以太坊项目都依靠以太坊作为公有链，公有链可以访问到更多用户，网络节点，货币和市场。然而通常有理由更偏好私有链或联盟链（在一群值得信任的参与者中）。例如，银行领域的很多公司都希望以太坊作为他们私有链的平台。私有链：书写许可对一个组织保持中心化。阅读许可可能是公开的或者限制在任意程度。应用很可能包含对单个公司内部的数据库管理，审查等，因此公共的可读性在很多情况下根本不必要，但在另一些情况下人们又想要公共可读性。
　　私有链/联盟链可能和公有链毫无联系，他们仍然通过投资以太坊软件开发，对以太坊整体生态系统有利。经过一段时间，这会转变成软件改善，知识共享和工作机会。
　　Geth通过发现协议找到对等端。在发现协议中，节点互相闲聊发现网络上的其他节点。最开始，geth会使用一系列辅助程序节点，这些辅助程序节点的端点记录在源代码中。
　　了解更多关于连接对等端点的信息，比如IP地址、端口号和支持协议，用管理员对象的peers()功能。admin.peers()会返回到现在已连接的对等端点列表。
　　可以在运行期间通过Javascript使用admin.addPeer()加入静态节点。
**2.智能合约：**

　　基于区块链的智能合约包括事务处理和保存的机制，以及一个完备的状态机，用于接受和处理各种智能合约；并且事务的保存和状态处理都在区块链上完成。事务主要包含需要发送的数据；而事件则是对这些数据的描述信息。事务及事件信息传入智能合约后，合约资源集合中的资源状态会被更新，进而触发智能合约进行状态机判断。如果自动状态机中某个或某几个动作的触发条件满足，则由状态机根据预设信息选择合约动作自动执行。
　　智能合约系统根据事件描述信息中包含的触发条件，当触发条件满足时，从智能合约自动发出预设的数据资源，以及包括触发条件的事件；整个智能合约系统的核心就在于智能合约以事务和事件的方式经过智能合约模块的处理，出去还是一组事务和事件；智能合约只是一个事务处理模块和状态机构成的系统，它不产生智能合约，也不会修改智能合约；它的存在只是为了让一组复杂的、带有触发条件的数字化承诺能够按照参与者的意志，正确执行。
　　基于区块链的智能合约构建及执行分为如下几步： 

```
1. 多方用户共同参与制定一份智能合约；  
2. 合约通过P2P网络扩散并存入区块链；  
3. 区块链构建的智能合约自动执行。  
```

**3.通过Truffle框架开发智能合约项目：**

　　Truffle是针对基于以太坊的Solidity语言的一套开发框架。本身基于Javascript。Truffle的作用包括： 

　　首先对客户端做了深度集成。开发，测试，部署一行命令都可以搞定。不用再记那么多环境地址，繁重的配置更改，及记住诸多的命令。 

　　它提供了一套类似maven或gradle这样的项目构建机制，能自动生成相关目录，默认是基于Web的。当前这个打包机制是自定义的，比较简陋，不与当前流行打包方案兼容。但自已称会弃用，与主流兼容，好在它也支持自定义打包流程。
　　提供了合约抽象接口，可以直接通过var meta = MetaCoin.deployed();拿到合约对象后，在Javascript中直接操作对应的合约函数。原理是使用了基于web3.js封装的Ether Pudding工具包。简化开发流程。
　　提供了控制台，使用框架构建后，可以直接在命令行调用输出结果，可极大方便开发调试。
　　提供了监控合约，配置变化的自动发布，部署流程。不用每个修改后都重走整个流程。

### 步骤

步骤1：搭建私有链

1.1 打开虚拟机1作为矿机节点虚拟机
1.2 打开虚拟机2作为业务节点虚拟机
1.3 在虚拟机1矿机节点虚拟机中进入目录

- cd /yy/workspace/privatenet/

执行命令

- ls

可看到如下文件及文件夹
chain ethdatadir hdchain.log hdgenesis.json

1.4 在此目录下执行如下命令

- geth --datadir ".\chain" init hdgenesis.json

使用创世区块建立区块链
1.5 使用命令开启以太坊程序

- geth --identity "HDetherum" --rpc --rpccorsdomain "*" --datadir ".\chain" --port "30303" --rpcapi "db,eth,net,web3" --networkid 95520 -nodiscover --verbosity=5 console 2>>hdchain.log 

其中关键参数解释如下：
--identity是节点标识符，分别为HDetherum0、1、2、3
--rpc默认使用rpc连接
--datadir一定要填和上一步一致的路径，可以填全路径
--networkid是网络标识 

1.6 在虚拟机2业务节点虚拟机中重复上述操作，如下：

进入目录

- cd /yy/workspace/privatenet/

执行命令

- ls

可看到如下文件及文件夹
chain ethdatadir hdchain.log hdgenesis.json

1.7 在此目录下执行如下命令

- geth --datadir ".\chain" init hdgenesis.json

使用创世区块建立区块链

1.8 使用命令开启以太坊程序

- geth --identity "HDetherum" --rpc --rpccorsdomain "*" --datadir ".\chain" --port "30303" --rpcapi "db,eth,net,web3" --networkid 95520 -nodiscover --verbosity=5 console 2>>hdchain.log 

1.9 在虚拟机2业务节点虚拟机中运行admin.nodeInfo.enode获取信息，并且通过ifconfig获得该机器的ip地址
1.10 虚拟机1矿机节点虚拟机运行admin.addPeer(/*上一步获取的信息*/)，注意修改“[::]”为第二个节点的ip地址，端口为1.5步中指定的端口。举例如：admin.addPeer("enode://6b9b849c2896f9212a115c57ef96892c4e98c4ef6075f4211bdbe8125be8b1a105c53555702c46366c5fb052c7c048c7ee153260d76bc123cb6ae0c25a5b2ec7@192.168.1.134:30303?discport=0")
1.11 运行完毕后两台虚拟机都可通过admin.peers命令查看对等节点是否添加成功。所有节点都连入后，私有链建立完毕。
1.12 虚拟机1矿机节点虚拟机运行personal.newAccount(“123456”),创建一个用户账户，账户地址可通过eth.accounts[0]查看，密码为123456
1.13 虚拟机1矿机节点进行挖矿执行如下命令：

- miner.start()。

停止挖矿的命令为

- miner.stop()。(我们暂时不需执行此命令)

查看当前区块号命令为eth.blockNumber。可观察各个节点的区块数是否已同步。可通过eth.getBalance(eth.accounts[0])查看物理机账户的以太币余额。
1.8 当有节点断掉时（命令行窗口被关闭），重新运行1.8, 1.9, 1.10, 1.11步命令即可。

步骤2：源码整体流程

2.1 智能合约文件通过solidity语言进行编写，本例中共包含以下合约：

> 分别为教育部合约、企业合约、学校合约、学生合约以及基础合约。
> 教育部合约负责发布合约、注册学校以及为学生的学历证书签名授权。
> 学校合约负责注册学生及注册学生的电子学历证书。
> 学生合约及企业合约可以查询电子证书的有效性。

步骤3：Truffle项目

　　3.1 　　虚拟机02业务节点执行如下命令，建立教育部节点账户、学校节点账户、学生节点账户，并分别解锁
personal.newAccount(“123456”)
personal.newAccount(“123456”)
personal.newAccount(“123456”)
注意其依次顺序进行解锁
personal.unlockAccount(eth.accounts[1])
personal.unlockAccount(eth.accounts[2])
personal.unlockAccount(eth.accounts[3]) 

```
        执行命令
        personal.listAccounts
        可看到如下输出
        ["0xd2022c34fb44e5a0d9053e7bff9e97aacb5f7b04", "0x3d8d6e96a3cb7db8fab3ec4ee897b3b96dfaabcf", "0xed4e5d74d2184ac430c810da2435682365f12fa5"]
```

在虚拟机1矿机节点通过eth.sendTransaction({from:eth.accounts[0],to:acc1,value:web3.toWei(3,"ether")})向教育部账户发送一些以太币，学校节点类似（后面发起交易需要gas，正常情况下挖矿可得gas，不用进行这些交易）。
acc1为前面查出的三个账户地址如："0xd2022c34fb44e5a0d9053e7bff9e97aacb5f7b04"

发起交易前需要解锁账户，命令为personal.unlockAccount(eth.accounts[0]) 

　　电子证照智能合约路径为/yy/workspace/ElecCert
　　部署合约步骤： 

> 修改./truffle.js里的network_id为私有链的id
> 解锁教育部账户。
> personal.unlockAccount(eth.accounts[1])
> 运行truffle migrate,如果合约有更新运行truffle migrate –reset。需要挖矿以完成合约部署，保存返回的合约地址。
> 在/yy/workspace/ElecCert目录下执行npm run dev可

　　系统流程演示：
　　1)合约部署后，首先教育部通过合约注册学校的地址，该学校的名称、地址通过向智能合约发送交易永远保存在区块链的交易记录中，流程演示如图：
　　2)然后学校注册学生信息，流程演示如图：

　　3)当学生毕业后，学校向学生发放电子学历：

​	4)教育部可以查询到学校发放的证书，并进行签名授权。

​	5)学生可以通过证书编号查询自己的证书。

### 测验4

1.【填空题】Geth通过发现___找到对等端待更新

正确答案：协议

2.【填空题】Truffle是针对基于____的Solidity语言的一套开发框架。

正确答案：以太坊

3.【填空题】停止挖矿的命令为：miner.____()

正确答案：stop

## Windows环境下配置基于Web的SSL连接

### 原理

**
1.安全套接层协议SSL**
　　它是Netscape公司提出的基于WEB应用的安全协议，它指定了一种在应用程序协议和TCPflP协议间提供数据安全性分层的机制，但常用于安全WEB应用的HTTP协议。

**2.安全服务**
　　SSL为TCP／IP连接提供数据加密、服务器认证、消息完整性以及可选的客户机认证。

**3.加密机制**
　　SSL采用RsA、DES，3DES等、密码体制以及MD系列HASH函数、Diffie-Hellman密钥交换算法。

**4.工作原理**
　　客户机向服务器发送SSL版本号和选定的加密算法；服务器回应相同信息外还回送一个含RSA公钥的数字证书；客户机检查收到的证书足否在可信任CA列表中，若在就用对应CA的公钥对证书解密获取服务器公钥，若不在，则断开连接终止会话。客户机随机产生一个DES会话密钥，并用服务器公钥加密后再传给服务器t服务器用私钥解密出会话密钥后发回一个确认报文，以后双方就用会话密钥对传送的报交加密。

**5.优点**
　　SSL设置简单成本低，银行和商家无须大规模系统改造；凡构建于TCP／IP协议簇上的C／S模式需进行安全通信时都可使用，持卡人想进行电于商务交易，无须在自己的电脑L安装专门软件，只要浏览器支持即可；SSL在应用层协议通信前就已完成加密算法，通信密钥的协商及服务器认证工作，此后应用层协议所传送的所有数据都会被加密，从而保证通信的安全性。

**6.缺点**
　　SSL除了传输过程外不能提供任何安全保证；不能提供交易的不可否认性；客户认证是可选的，所以无法保证购买者就是该信用卡合法拥有者；SSL不是专为信用卡交易而设计，在多方参与的电子交易中，SSL协议并不能协调各方间的安全传输和信任关系。

### 步骤

步骤1：搭建证书服务器

　　1.1 打开“服务器管理器”，点击“操作”选项中的“添加角色”。

　　1.2 进入“添加角色向导”，点击“下一步”。

　　1.3 找到“Active Directory 证书服务”，勾选此选项，之后点击“下一步”。

　　1.4 进入证书服务简介界面，点击“下一步”。

　　1.5 将证书颁发机构、证书颁发机构WEB注册勾选上，然后点击“下一步”。之后的安装一直保持默认设置，直到“安装”界面，需要等待一会，随后安装成功。

步骤2：为Web服务器申请证书

　　2.1进入“开始”菜单，点击“所有程序”，接着点击“管理工具”，打开“Internet 信息服务（IIS）管理器”，如下图所示：

　　2.2进入下图所示界面后，点击“WIN-YNLG4C1EM84”，进入“服务器证书”中。

　　2.3点击“创建证书申请”，如下图所示，填写信息，“通用名称”填写操作机IP地址，随后点击“下一步”。

　　2.4在下图所示界面，选择保存在桌面上的hongya文件中。

步骤3：提交Web服务器证书

　　3.1在操作机上打开IE浏览器，在地址栏中输入 `http://100.100.0.52/certsrv（操作机ip）`
　　在出现的页面中选中“申请证书”，并点击“下一步”。

　　3.2在弹出的页面中点击“申请证书”后选择“高级申请”，并点击“下一步”。高级申请可以由用户导入请求证书文件。

　　3.3在弹出的页面中选中“Base64编码方式”，并点击“下一步”。

　　3.4找到证书请求文件，并把它的内容粘贴复制到 “证书申请”框内，点击“提交”。这就将我们上面刚刚完成的证书请求文件（即含有个人信息和公钥的文件）提交。

　　3.5将会弹出下面的页面，表示提交成功。

步骤4：服务器证书的颁发和安装

　　4.1进入“开始”菜单，点击“所有程序”，选择管理工具中的“Certification Authority”。

　　4.2点击“挂起的申请”按钮，可以看到之前提交的证书申请；点击鼠标右键会出现“所有任务”，点击“所有任务”->点击“颁发”将挂起的证书申请审批通过，此时挂起的证书会从当前界面消失，即代表已完成操作

　　4.3点击“颁发的证书”，可以看到新老已审批通过的证书，如下图所示：

　　4.4重新打开IE，输入之前的网址：h`ttp://100.100.0.52/certsrv/；` 打开页面后，可点击“查看挂起的证书申请的状态”；之后会进入“查看挂起的证书申请的状态”页面，点击“保存的申请证书”。

　　4.5接着点击“保存的申请证书”，如下图所示：

　　4.6进入新页面后，勾选Base 64编码，然后点击“下载证书”,将已申请成功的证书保存到指定位置，后续待用.

　　4.7回到IIS服务器中，点击“服务器证书”->“完成证书申请”->选择刚保存的证书，然后在“好记名称”文本框中输入自定义的名称，完后点击“确定”。

　　4.8上述操作完后，可在“服务器证书”界面下看到证书。

步骤5：客户端证书的申请、颁发与安装

　　5.1进入目标机中，点击IE浏览器，访问操作机ip：`http://100.100.0.52/certsrv/`
　　此时会出现证书服务页面；点击“申请证书”，进入下一界面点击“Web浏览器证书”，如下图所示：

　　5.2进入下一界面，此时会弹出一个提示窗口：“为了完成证书注册，必须将该CA的网站配置为使用HTTPS身份验证”

　　5.3此时我们无法填写信息，首先点击菜单栏中的“工具”，选择“Internet选项”。

​    　5.4在选项中，进入“安全”界面，点击“自定义级别”，在安全设置中找到“对未标记为可安全执行脚本...”，将它改为“启用”。

　　5.5重新刷新一下界面，就可以填写识别信息，完成后单击提交。

　　5.6 CA服务器响应后，出现下面的证书挂起页面，表示CA服务器已经收到证书申请，需要进行处理后才能反馈。

　　5.7在操作机中的“Certification Authority”中点击“挂起的申请”，将其中的证书颁发，如下图所示：

　　5.8回到目标机中，在浏览器中登录`http://100.100.0.52/certsrv/`，点击“下载CA证书”，如下图所示：

　　5.9首先选择“Base 64”,再点击“下载CA证书”，保存在桌面上。

　　5.10打开桌面上的证书进行安装，在“证书存储”界面中，选择“受信任的根证书颁发机构”，最后会出现“导入成功”提示框。

　　5.11重新进入`http://100.100.0.52/certsrv/`界面，点击“查看挂起的证书申请状态”，然后点击“Web浏览器证书”，最后点击“安装此证书”，随后显示成功。

步骤6：未配置SSL的普通Web连接的安全性

　　6.1在配置SSL设置前，在目标机中打开网络监测工具sniffer，监测WEB服务器的网络流量。在桌面找到工具Sniffer，选项设置选择“Red Hat VirtIO”网卡，勾选“Log OFF”（意味着先不连接），点击“确定”。

　　6.2进入工具主界面后，点击“文件”中的“记录于”。然后点击左上角的“开始监测”按钮，如下图所示：

　　6.3在浏览器中登录：`http://100.100.0.52/certsrv/`
　　然后在sniffer中点击“结束监测”按钮，点击下方的“解码”，查看监测结果(根据实际情况查找`HTTP`，如没有发现可重头执行该步骤)，发现在SSL配置之前，Web访问信息是明文传输的，第三方可以利用相关的工具窃取信息，在截获的POST类型的数据包中可以获得连接的地址等相应信息。

步骤7：在服务器上配置SSL

　　7.1回到操作机中，打开“Internet IIS管理器”，展开“网站”，右键点击左边的“Default Web Site”菜单，然后点击“绑定”功能。

　　7.2会弹出“网站绑定”界面，默认会出现一个类型为http，端口为80的主机服务，然后点击“添加”，会弹出“添加网站绑定”界面，在此界面中选择“类型：https”、“SSL证书：hongya”，然后点“确定”,如下图所示：

　　7.3 点击左菜单上的“CertSrv”证书服务网站，然后点击“SSL设置”。

　　7.4 进入SSL设置页面，勾选上“要求SSL”即启用SSL功能，然后点击“应用”，保存设置。

　　7.5 打开IE，再次输入：`https://100.100.0.52/`,随后弹出结果为“welcome”

步骤8：客户端通过SSL与服务器建立连接

　　8.1再进入目标机中，继续打开Sniffer的监听功能。

　　8.2打开浏览器，输入：`https://100.100.0.52/certsrv/`

　　8.3查看sniffer工具截获的信息，我们发现其中并未出现POST类型的有效信息包，截获的信息均为无效的乱码，如下图所示，这说明SSL很好的实现了Web连接的安全性。

### 测验5

1.【填空题】Web浏览器证书申请的话，必须将CA的网站配置为使用____身份认证

正确答案：HTTPS

1.【填空题】成功搭建https网站后，网页显示的内容文字为___

正确答案：welcome

1.【单选题】SSL可能采用什么算法提供的安全服务？
A、RsA
B、DES
C、3DES

2.【单选题】SSL支持的验证方式有？
A、客户和服务器都验证
C、完全匿名
D、A、C

3.【单选题】以下哪个不是IPsec所提供的安全服务？
C、无连接完整性

4.【单选题】SSL协议全称为？
A、安全套接字协议

5.【单选题】关于SSL的优缺点说法不正确的是？
B、它对于最终用户和应用程序是透明的

6.【单选题】CA系统的主要功能是对证书进行管理，包括下列哪一项？
A、颁发证书
B、废除证书
C、更新证书
D、以上都有

## 木马攻击实验

### 原理

**1.木马定义**
　　木马是隐藏在正常程序中的具有特殊功能恶意代码，是具备破坏，删除和修改文件，发送密码，记录键盘，实施Dos攻击甚至完全可能告知计算机等特殊功能的后门程序。它隐藏在目标计算机里，可以随计算机自动启动并在某一端口监听来自控制端的控制信息。

**2.木马工作原理**
　　（1）木马的传统连接技术：一般木马都采用C/S(client/server,即服务器/客户端)运行模式，因此它分为两部分，即客户端和服务前端木马程序。其原理是，当服务器端程序在目标计算机上被执行后，一般会打开一个默认的端口进行监听，当客户端向服务器端主动提出连接请求，服务器端的木马程序就会自动运行，来应答客户端的请求，从而建立连接。第一代和第二代木马就采用这种方式。
　　（2）木马的反弹端口技术：随着防火墙技术的发展，它可有效拦截从外部主动发起的连接的木马程序。但防火墙对内部发起的连接请求则认为是正常连接，第三代第四代木马就是利用这个缺点，其服务器端程序主动发起对外连接请求，再通过某些方式连接到木马的客户端，就是说“反弹式”木马是服务器端主动发起连接请求，而客户端是被动的连接。
　　（3）线程插入技术：我们知道，一个应用程序在运行之后，都会在系统之中产生一个进程，同时，每个进程分别对应了一个不同的进程标识符。系统会分配一个虚拟的内存空间地址段给这个进程，一切相关的程序操作，都会在这个虚拟的空间中进行。一般情况下，线程之间是相互独立的，当一个线程发生错误的时候，并不一定会导致整个进程的崩溃。“线程插入”技术就是利用线程之间运行的相对独立性，使木马完全地融进了系统那个内核。系统运行时会有很多的进程，而每个进程又有许多的线程，这就导致了查杀利用“线程插入”技术木马程序的难度。

**3.木马的特征**
　　木马不经电脑用户准许就可获得电脑的使用权。程序容量十分轻小，运行时不会浪费太多资源，因此没有使用杀毒软件是难以发觉的，运行时很难阻止它的行动，运行后，立刻自动登录在系统引导区，之后每次在Windows加载时自动运行，或立刻自动变更文件名，甚至隐形，或马上自动复制到其他文件夹中，运行连用户本身都无法运行的动作。

**4.木马的危害**
　　a）、盗取我们的网游账号，威胁我们的虚拟财产的安全
　　木马病毒会盗取我们的网游账号，它会盗取我们帐号后，并立即将帐号中的游戏装备转移，再由木马病毒使用者出售这些盗取的游戏装备和游戏币而获利。
　　b）、盗取我们的网银信息，威胁我们的真实财产的安全
　　木马采用键盘记录等方式盗取我们的网银帐号和密码，并发送给黑客，直接导致我们的经济损失。
　　c）、利用即时通讯软件盗取我们的身份，传播木马病毒等不良信息
　　中了此类木马病毒后，可能导致我们的经济损失。在中了木马后电脑会下载病毒作者指定的程序任意程序，具有不确定的危害性。如恶作剧等。
　　d）、给我们的电脑打开后门，使我们的电脑可能被黑客控制
　　如灰鸽子木马等。当我们中了此类木马后，我们的电脑就可能沦为肉鸡，成为黑客手中的工具

**5.木马病毒的防御**
　　木马查杀(查杀软件很多，有些病毒软件都能杀木马)
　　防火墙(分硬件和软件)家里面的就用软件好了，如果是公司或其他地方就硬件和软件一起用。
　　基本能防御大部分木马，但是的软件都不是万能的，还要学点专业知识，有了这些，你的电脑就安全多了。高手也很多，只要你不随便访问来历不明的网站，使用来历不明的软件(很多盗版或破解软件都带木马，这个看你自己经验去区分)，还要及时更新系统漏洞，如果你都做到了，木马，病毒。就不容易进入你的电脑了。

### 步骤

步骤1：打开文件目录下的木马客户端工具
　　1.1 打开目录D:\1、信息安全\3、信息系统安全\17软件安全课程\6.木马攻击实验，此文件夹为冰河木马的控制端和服务端程序。
　　1.2 可以看到G_SERVER.EXE文件（不用打开），G_Server是木马的服务器端，即用来植入目标主机的程序。
　　1.3 双击打开G_CLIENT.EXE（G_Client是木马的客户端，即木马的控制端）

步骤2：利用远程共享，将木马程序上传至目标机，并运行
　　2.1 回到D:\1、信息安全\3、信息系统安全\17软件安全课程 文件夹，将6.木马攻击实验共享，点击属性-共享
　　2.2 共享属性框下有个共享按钮，弹出“文件共享”窗口，在添加栏输入Everyone
　　2.3 点击“添加”按钮后，下面会出现Everyone用户，将其权限级别调成“读取/写入”权限，然后点击下面的“共享”按钮，共享文件。
　　2.4 弹出“文件共享”窗口，提示已经共享完毕，点击“完成”，确认已共享完毕。
　　2.5 回到目标机上，点击开始-运行，输入“\\100.100.0.11”（输入操作机ip地址，根据实际输入），成功打开操作机共享的文件夹。
　　2.6 将G_SERVER.EXE文件（服务端程序）复制到目标机桌面中。
　　双击运行桌面的G_SERVER.EXE的文件

步骤3：冰河木马客户端连接目标机
　　3.1 回到操作机界面，冰河控制端菜单栏有一个“添加主机”按钮，点击打开。
　　显示名称：填入显示在主界面的名称，即目标机的ip地址
　　主机地址：填入服务器端主机的IP地址
　　访问口令：填入每次访问主机的密码，“空”即可
　　监听端口：冰河默认的监听端口是7626
　　3.2 在显示名称处填写目标机的ip地址（此处目标机示例ip为100.100.0.44，请根据实际情况修改），点击确定。
　　3.3 单击100.100.0.44主机，如果连接成功，则会显示服务器端主机上的盘符。这时我们就可以像操作自己的电脑一样操作远程目标电脑，比如打开C:\WINDOWS\system32\config目录可以找到对方主机上保存用户口令的SAM文件。

步骤4：控制目标机后，对系统进行操作
　　4.1 点击“命令控制台”，点击“口令类命令”前面的“+”，选择“系统信息及口令”，点击“系统信息”按钮，查看目标机系统信息。
　　“系统信息及口令”：可以查看远程主机的系统信息，开机口令，缓存口令等。可看到非常详细的远程主机信息，这就无异于远程主机彻底暴露在攻击者面前
　　“历史口令”：可以查看远程主机以往使用的口令
　　“击键记录”：启动键盘记录后，可以记录远程主机用户击键记录，一次可以分析出远程主机的各种账号和口令或各种秘密信息
　　4.2 点击“命令控制台”，点击“控制类命令”前面的“+”。
　　“捕获屏幕”：这个功能可以使控制端使用者查看远程主机的屏幕，好像远程主机就在自己面前一样，这样更有利于窃取各种信息，单击“查看屏幕”按钮，然后就染成了远程主机的屏幕。可以看到，远程主机屏幕上的内容就显示在本机上了，显示内容不是动态的，而是每隔一段时间传来一幅。
　　“发送信息”：这个功能可以使你向远程计算机发生Windows标准的各种信息，在“信息正文”中可以填入要发给对方的信息，在图表类型中，可以选择“普通”，“警告”，“询问”，“错误”等类型。按钮类型可以选择“确定”“是”“否”等类型。
　　“进程管理”：这个功能可以使控制着查看远程主机上所有的进程
　　“窗口管理”：这个功能可以使远程主机上的窗口进行刷新，最大化，最小化，激活，隐藏等操作。
　　“系统管理”：这个功能可以使远程主机进行关机，重启，重新加载“冰河”自动卸载“冰河”的操作
　　“鼠标控制”：这个功能可以使远程主机上的鼠标锁定在某个范围内
　　“其他控制”：这个功能可以使远程主机进行自动拨号禁止，桌面隐藏，注册表锁定等操作
　　4.3 点击“命令控制台”，点击“网络类命令”前面的“+”即可展开网络类命令
　　“创建共享”：在远程主机上创建自己的共享
　　“删除共享”：在远程主机上删除某个特定的共享
　　“网络信息”：查看远程主机上的共享信息
　　4.4 点击“命令控制台”，点击“文件类命令”前面的“+”即可展开“文件类命令”
　　“文件浏览”，“文件查找”，“文件压缩”，“文件删除”，“文件打开”等菜单可以查看，查找，压缩，删除，打开远程主机上某个文件。“目录增删”，“目录复制”，可以增加，删除，复制远程主机上的某个目录。
　　4.5 点击“命令控制台”，点击“注册表读写”前面的“+”即可展开“注册表读写”
　　注册表读写提供了“键值读取”，“键值写入”,“键值重命名”，“主键浏览”，“主键增删”,“主键复制”的功能。
　　4.6 点击“命令控制台”，点击“设置类命令”前面的“+”即可展开“设置类命令”，设置类命令提供了“更换墙纸”，“更改计算机名”“服务器端配置”的功能。

步骤5：自动和手动清除冰河木马病毒
　　5.1 点击“控制类命令”前面的“+”，点击“系统控制”可看到“自动卸载冰河”按钮并点击，在弹出的窗口里面点击“是”，则可以卸载远程主机上的木马
　　5.2 进入到目标机中，点击“G_SERVER”程序，再次将木马病毒运行。
   5.3 在实际情况中木马客户端不可能为木马服务器端自动卸载木马，所以我们需要自己手动删除木马文件，在发现计算机有异常情况时，（如经常自动重启，密码信息泄露时）我们会怀疑是否已经中了木马，这时我们应该查看注册表，此处操作在目标机中的进行，在“开始”的“运行”里面输入regedit，打开Windows注册表编辑器。
　　5.4 依次打开子键目录
HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows\CurrentVersion\Run
　　这个目录是个管理加载启动项的地方，也就是电脑开启后程序自动会启动的地方。
　　5.5 在目录中发现了一个默认的键值C:\WINNT\System32\kernel32.exe，这就是“冰河”密码在注册表中加入的键值，选中它，右键，点击删除，即可把它删除。
　　5.6 然后依次打开子键目录HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows\CurrentVersion\Runservices，同样存在着一个默认的键值C:\WINNT\System32\kernel32.exe，选中它，右键，点击删除。
　　这个目录和Run目录一样，但是包含了“服务”，它不象一般的程序它们是比较重要的或者是“系统”程序。
　　5.7 然后我们再进入C:\WINDOWS\System32目录，找到“冰河”木马的可执行文件KERNEL32.exe文件，将它删除。
　　5.8 修改文件关联也是木马常用的手段，“冰河”木马将txt文件的缺省打开方式由notepad.exe改为木马的启动程序，除此之外，html,exe,zip,com等也都是木马的目标，所以，在最后需要回复注册表中的txt文件关联功能。找到注册表的HKEY_CLASSES_ROOT\txtfile\Shell\open\command下的默认值，选中“（默认）”，右键——修改
　　5.9 即可出现如下窗口，将数值数据C:\Windows\System32\Sysexplr.exe %1改为正常情况下的C:\Windows\notepad.exe %1即可。
　　重新启动计算机，冰河木马就彻底删除了。

### 测验6

1.【填空题】打开冰河木马查看默认连接端口为7626（答案详细见图3覆盖内容,请标准填写）
正确答案：7626

1.【填空题】查看系统信息，目标机当前用户为Administrator
正确答案：Administrator

1.【填空题】回到注册表目录HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows\CurrentVersion\Run查看系统管理加载项第二个字符串名称为IMJPMIG8.1（答案详细见图21覆盖内容，请标准填写）
正确答案：IMJPMIG8.1

1.【单选题】以下关于木马的定义说法错误的是？
A、一般来说很容易发现

2.【单选题】以下哪个不是木马工作的原理？
B、3389端口远程登陆技术

3.【单选题】以下哪些是木马的特征？
A、木马不经电脑用户准许就可获得电脑的使用权
B、程序容量十分轻小，运行时不会浪费太多资源，因此没有使用杀毒软件是难以发觉的
C、运行后，立刻自动登录在系统引导区，之后每次在Windows加载时自动运行，或立刻自动变更文件名，甚至隐形

4.【单选题】以下哪些是木马的危害？
A、给我们的电脑打开后门，使我们的电脑可能被黑客控制
B、盗取我们的网银信息，威胁我们的真实财产的安全
C、利用即时通讯软件盗取我们的身份，传播木马病毒等不良信息

5.【单选题】以下哪个不是木马病毒防御的措施？
C、开启远程服务端口

## 数字水印攻击实验

### 原理

**1.数字水印**
　　数字水印（Digital Watermarking）技术是将一些标识信息（即数字水印）直接嵌入数字载体当中（包括多媒体、文档、软件等）或是间接表示（修改特定区域的结构），且不影响原载体的使用价值，也不容易被探知和再次修改。但可以被生产方识别和辨认。通过这些隐藏在载体中的信息，可以达到确认内容创建者、购买者、传送隐秘信息或者判断载体是否被篡改等目的。数字水印是保护信息安全、实现防伪溯源、版权保护的有效办法，是信息隐藏技术研究领域的重要分支和研究方向。

**2.数字水印技术的特点**
　　**（1）安全性(Security)**
　　数字水印的信息应是安全的，难以篡改或伪造，同时，应当有较低的误检测率，当原内容发生变化时，数字水印应当发生变化，从而可以检测原始数据的变更；当然数字水印同样对重复添加有很强的抵抗性；

　　**（2）隐蔽性(Invisibility)**
　　数字水印应是不可知觉的，而且应不影响被保护数据的正常使用；不会降质；

　　**（3）鲁棒性(Robustness)**
　　该特性适用于鲁棒水印。是指在经历多种无意或有意的信号处理过程后，数字水印仍能保持部分完整性并能被准确鉴别。可能的信号处理过程包括信道噪声、滤波、数/模与模/数转换、重采样、剪切、位移、尺度变化以及有损压缩编码等；

　　**（4）敏感性(Sensitivity)**
　　该特性适用于脆弱水印。是经过分发、传输、使用过程后，数字水印能够准确的判断数据是否遭受篡改。进一步的，可判断数据篡改位置、程度甚至恢复原始信息。

**3.数字水印的分类**
　　**（1）按特性划分**
　　按水印的特性可以将数字水印分为鲁棒数字水印和脆弱数字水印两类。鲁棒水印(Robust Watermarking)主要用于在数字作品中标识著作权信息，利用这种水印技术在多媒体内容的数据中嵌入创建者、所有者的标示信息，或者嵌入购买者的标示（即序列号）。在发生版权纠纷时，创建者或所有者的信息用于标示数据的版权所有者，而序列号用于追踪违反协议而为盗版提供多媒体数据的用户。用于版权保护的数字水印要求有很强的鲁棒性和安全性，除了要求在一般图像处理（如：滤波、加噪声、替换、压缩等）中生存外，还需能抵抗一些恶意攻击。
　　脆弱水印（Fragile Watermarking），与鲁棒水印的要求相反，脆弱数字水印主要用于完整性保护和认证，这种水印同样是在内容数据中嵌入不可见的信息。当内容发生改变时，这些水印信息会发生相应的改变，从而可以鉴定原始数据是否被篡改。根据脆弱水印的应用范围，脆弱水印又可分为选择性和非选择性脆弱水印。非选择性脆弱水印能够鉴别出比特位的任意变化，选择性脆弱水印能够根据应用范围选择对某些变化敏感。例如，图像的选择性脆弱水印可以实现对同一幅图像的不同格式转换不敏感，而对图像内容本身的处理（如：滤波、加噪声、替换、压缩等）又有较强的敏感性，即：既允许一定程度的失真，又要能将特定的失真情况探测出来。

　　**（2）按附载媒体划分**
　　按水印所附载的媒体，我们可以将数字水印划分为图像水印、音频水印、视频水印、文本水印以及用于三维网格模型的网格水印等。随着数字技术的发展，会有更多种类的数字媒体出现，同时也会产生相应的水印技术。
按检测过程划分
　　按水印的检测过程可以将数字水印划分为盲水印和非盲水印。非盲水印在检测过程中需要原始数据或者预留信息，而盲水印的检测不需要任何原始数据和辅助信息。一般来说，非盲水印的鲁棒性比较强，但其应用需要原始数据的辅助而受到限制。盲水印的实用性强，应用范围广。非盲水印中，新出现的半盲水印能够以少量的存储代价换来更低的误检率、漏检率，提高水印算法的性能。目前学术界研究的数字水印大多数是盲水印或者半盲水印。

　　**（3）按内容划分**
　　按数字水印的内容可以将水印划分为有意义水印和无意义水印。有意义水印是指水印本身也是某个数字图像（如商标图像）或数字音频片段的编码；无意义水印则只对应于一个序列。有意义水印的优势在于，如果由于受到攻击或其他原因致使解码后的水印破损，人们仍然可以通过视觉观察确认是否有水印。但对于无意义水印来说，如果解码后的水印序列有若干码元错误，则只能通过统计决策来确定信号中是否含有水印。

　　**（4）按隐藏位置划分**
　　按数字水印的隐藏位置，我们可以将其划分为时（空）域数字水印、频域数字水印、和时间/尺度域数字水印。
　　时（空）域数字水印是直接在信号空间上叠加水印信息，而频域数字水印、时/频域数字水印和时间/尺度域数字水印则分别是在DCT变换域、时/ 频变换域和小波变换域上隐藏水印。

　　**（5）按可见性划分**
　　按数字水印是否可见的性质，可分为可见水印和不可见水印两种。可见水印就是人眼能看见的水印，比如照片上标记的拍照的日期或者电视频道上的标识等。不可见水印就是人类视觉系统难以感知的，也是当前数字水印领域关注比较多的。

**4.应用领域**
　　随着数字水印技术的发展，数字水印的应用领域也得到了扩展，数字水印的基本应用领域是防伪溯源、版权保护、隐藏标识、认证和安全隐蔽通信。
　　当数字水印应用于防伪溯源时，包装、票据、证卡、文件印刷打印都是潜在的应用领域。用于版权保护时，潜在的应用市场在于电子商务、在线或离线地分发多媒体内容以及大规模的广播服务。数字水印用于隐藏标识时，可在医学、制图、数字成像、数字图像监控、多媒体索引和基于内容的检索等领域得到应用。数字水印的认证方面主要ID卡、信用卡、ATM卡等上面数字水印的安全不可见通信将在国防和情报部门得到广泛的应用。 多媒体技术的飞速发展和Internet的普及带来了一系列政治、经济、军事和文化问题，产生了许多新的研究热点，以下几个引起普遍关注的问题构成了数字水印的研究背景。

**5.常见数字水印攻击方法**
　　**（1）几何攻击**
　　几何攻击的目的并不是移去水印，而是在空间或时间上改变含有水印信息的载体数据。常见的集合变换有位移攻击、旋转攻击、缩放攻击和剪切攻击。通常这类攻击算法往往会破坏数字水印提取/检测器的同步性，其结果是虽然水印仍然存在于载体作品中，但却无法成功提取/检测。

　　**（2）去除攻击**
　　去除攻击的目标是通过对含水印图像进行分析，试图从原图像中完全去除水印信息。这类攻击算法主要包括：去噪、量化、有损压缩、重新调制、统计均衡、共谋攻击、Oracle攻击等。虽然不是所有这些攻击手段都能完全去除水印，但是它们却能对嵌入的水印造成极大的破坏。
　　对于原始图像来说，水印信息通常可以看作是一种噪声，所以可以用去噪的方法去除水印。这种方法是采用线性滤波器如低通、高通和带通滤波器，或非线性滤波器如中值、形态滤波器滤除噪声。图1.2.5为经过不同强的椒盐度噪声攻击后的图像。
　　 量化一般发生在改变图像颜色深度的情况下，比如由彩色图像转换为灰度图像,或采用抖动或半影调算法将灰度图像显示、打印为二值图像。由于量化时损失了较多的图像信息，因此有可能去除水印。 

　　**（3）有损压缩**
　　有损压缩是一种常见的图像操作。由于压缩后图像信息有损失，因此有可能破坏水印信息。如果把水印嵌入于图像的高频部分，则经有损压缩压缩后几乎可以完全去除水印。JPEG压缩是最常见的有损压缩方法，因此抵抗JPEG压缩的能力是评价数字水印算法性能的重要指标之一。 

　　**（4）重新调制攻击**
　　重新调制攻击就是利用图像和水印的统计模型预测或估计出水印信息，然后利用估计出的水印去除原来的水印或对其进行窜改。 

　　**（5）统计均衡和共谋攻击**
　　统计均衡和共谋攻击是通过对同一数字作品的嵌有不同水印的各个版本或者嵌有相同水印的各种不同数字作品进行求和平均等统计运算来除去其中隐藏的水印，或者通过对这些水印作品进行裁剪并重新拼凑组合来消除水印。

　　**（6）协议攻击**
　　协议攻击的目标是攻击水印应用的概念和协议。这类方法包括IBM攻击、拷贝攻击等。 IBM攻击有时也称为可逆攻击，它是采用添加水印的方法使图像的所有权产生歧义。这种攻击的出发点是，若媒体数据中存在两个以上的水印时，一般的水印系统中没有区别那个水印是先加入的机制。假定原始媒体数据是d，版权人a在d中嵌入了版权水印wa，得到了加水印后的数据d+wa。而攻击者b在得到d+wa后，从中减去他的水印wb而形成了d+wa-wb，并声称拥有该数据的版权。这时的版权归属将成为一个有歧义的问题。
　　拷贝攻击并不破坏嵌入的水印，而是把水印从一幅图像复制到另一幅图像。尽管这种攻击并不破坏嵌入的水印，但是它带来了另外一个挑战，特别地当数字水印被用于版权保护和认证。所有者将不能认证出它的图像因为它将会在其他的由攻击者提供的图像中发现同样的数字水印。

　　**（7）稳健性攻击**
　　稳健性攻击是试图对整个水印化数据(嵌人水印后的载体数据)进行操作来削弱嵌入的水印的幅度(而不是试图识别水印或分离水印)，导致数字水印提取发生错误，甚至根本提取不出水印信号。常见的操作有线性滤波、非线性滤波、各种压缩(JPEG、MPEG)、添加噪声、打印和扫描等。
　　稳健性攻击中的操作会给水印化效据造成类噪声失真，可使在其后的水印提取和校验中得到一个失真、变形的水印信号。有两种方法抵抗这种攻击。即增加嵌入水印的力度和采用冗余嵌入技术。两种方法都会增加水印的强度．从而抵抗攻击。
增加嵌入水印幅度的方法，可以大大地降低攻击产生的类噪声失真现象，在多数应用中是有效的。嵌入的最大容许幅度应该根据人类视觉特性决定，不能影响水印的不可感知性。

### 步骤

步骤1：查看被攻击图片
　　1.1进入目录下（D:\1、信息安全\4、信息内容安全\21软件水印实验课程\1.数字水印攻击实验\StirMarkBenchmark\Media\Input\Images\Set1），以放入Set1里的Lena图片为例作为待攻击的图片

步骤2：修改SMBsettings文件
　　2.1进入工具目录（D:\1、信息安全\4、信息内容安全\21软件水印实验课程\1.数字水印攻击实验\StirMarkBenchmark\Profiles），该目录下有个SMBsettings文件，用记事本将其打开。
　　2.2我们能从文件中找到多种数字水印攻击方式，要使用哪种攻击就去掉前面的分号，可以同时进行多种攻击，但是要将去掉分号的按照攻击顺序重新编号，或者可以在下面自己添加想进行的攻击。
　　本实验以JPEG和Affine攻击为例（JPEG攻击是有损压缩；Affine攻击是旋转攻击，这两种攻击会对原图片的水印进行损坏）
　　2.3下拉文本对要进行的攻击类型进行参数设定，如下图所示，设定好后保存文本（很重要）

步骤3：运行工具进行数字水印攻击
　　3.1双击工具目录（D:\1、信息安全\4、信息内容安全\21软件水印实验课程\1.数字水印攻击实验\StirMarkBenchmark\Bin\Benchmark）里面的StieMarkBenchmark.exe。如下图所示，执行测试程序，在本目录下将生成一个新的日志文件。

步骤4：查看操作日志
　　4.1打开新生成的日志文件（D:\1、信息安全\4、信息内容安全\21软件水印实验课程\1.数字水印攻击实验\StirMarkBenchmark\Bin\Benchmark），其中会记录运行工具进行攻击的具体情况。

步骤5：查看攻击后得到的图片
　　5.1在工具目录（D:\1、信息安全\4、信息内容安全\21软件水印实验课程\1.数字水印攻击实验\StirMarkBenchmark\Media\Output\Images\Set1）里查看攻击后图片，如下图所示：

### 测验7

1.【填空题】打开新生成的日志文件中可以看到MS family type的值为6（答案见如图11覆盖处）
正确答案：6

1.【单选题】下列哪一项不是常见的水印攻击方法？
C、暴力攻击

2.【单选题】下列不是数字水印技术特点的选项（）？
B、明显性

3.【单选题】下列哪一选项可以运用数字水印技术？
A、票据
B、证卡
C、文件印刷打印

4.【单选题】下列选项中哪一项不是数字水印攻击的方法？
D、单独攻击

5.【单选题】下列选项中哪一项不是稳健性攻击中的操作？
A、减少噪音

## IdooFileEncryption文件加密实验

### 原理

**
1.文件加密**
　　文件加密按加密途径可分为两类: 一类是WINDOWS系统自带的文件加密功能,一类是采用加密算法实现的商业化加密软件.WINDOWS系统加密方法有五种,商业化的加密软件又分为驱动级加密和插件级加密;如果按加密算法又可分为三类 :对称IDEA 算法、非对称RSA算法、不可逆AES算法.
　　**（1）对称IDEA 算法**
　　对称加密(也叫私钥加密)指加密和解密使用相同密钥的加密算法。有时又叫传统密码算法，就是加密密钥能够从解密密钥中推算出来，同时解密密钥也可以从加密密钥中推算出来。而在大多数的对称算法中，加密密钥和解密密钥是相同的，所以也称这种加密算法为秘密密钥算法或单密钥算法。它要求发送方和接收方在安全通信之前，商定一个密钥。对称算法的安全性依赖于密钥，泄漏密钥就意味着任何人都可以对他们发送或接收的消息解密，所以密钥的保密性对通信的安全性至关重要。
　　**（2）非对称RSA算法**
　　非对称加密算法是一种密钥的保密方法。
　　非对称加密算法需要两个密钥：公开密钥（publickey）和私有密钥（privatekey）。公开密钥与私有密钥是一对，如果用公开密钥对数据进行加密，只有用对应的私有密钥才能解密；如果用私有密钥对数据进行加密，那么只有用对应的公开密钥才能解密。因为加密和解密使用的是两个不同的密钥，所以这种算法叫作非对称加密算法。
　　非对称密码体制的特点：算法强度复杂、安全性依赖于算法与密钥但是由于其算法复杂，而使得加密解密速度没有对称加密解密的速度快。对称密码体制中只有一种密钥，并且是非公开的，如果要解密就得让对方知道密钥。所以保证其安全性就是保证密钥的安全，而非对称密钥体制有两种密钥，其中一个是公开的，这样就可以不需要像对称密码那样传输对方的密钥了。这样安全性就大了很多。

**2.文件加密的重要性**
　　我们知道在互联网上进行文件传输、电子邮件商务往来存在许多不安全因素，特别是对于一些大公司和一些机密文件在网络上传输。而且这种不安全性是互联网存在基础——TCP/IP协议所固有的，包括一些基于TCP/IP的服务;所以为了保证安全，我们必须给文件加密。
　　加密在网络上的作用就是防止有用或私有化信息在网络上被拦截和窃取。一个简单的例子就是密码的传输，计算机密码极为重要，许多安全防护体系是基于密码的，密码的泄露在某种意义上来讲意味着其安全体系的全面崩溃。通过网络进行登录时，所键入的密码以明文的形式被传输到服务器，而网络上的窃听是一件极为容易的事情，所以很有可能黑客会窃取得用户的密码，如果用户是Root用户或Administrator用户，那后果将是极为严重的。
　　解决上述难题的方案就是加密，加密后的口令即使被黑客获得也是不可读的，加密后的标书没有收件人的私钥也就无法解开，标书成为一大堆无任何实际意义的乱码，这样即使被盗也不会有损失。所以加密对于保护文件是相当的重要。
　　在这里需要强调一点的就是，文件加密其实不只用于电子邮件或网络上的文件传输，其实也可应用静态的文件保护，如超级加密3000就可以对磁盘、硬盘中的文件或文件夹进行加密，以防他人窃取其中的信息。

**3.文件加密的方法**

- 利用组策略工具把存放隐私资料、重要文件的硬盘分区设置为不可访问。
- 利用注册表中的设置，把某些驱动器设置为隐藏。
- 利用Windows自带的“磁盘管理”组件也可以实现硬盘隐藏。
- 利用WinRAR等工具可以比较安全地为你的数据加密。
- 透明加解密技术。

### 步骤

步骤1：安装实验工具
　　1.1点击进入目录（D:\1.信息安全\4.信息内容安全\22.信息内容保密课程\4.IdooFileEncryption文件加密实验）中“idooFileEncryption_setup5.4.exe”安装程序
　　1.2双击运行，显示界面如图3所示，输入密码“111111”。
　　1.3随后一直点击“Next”,保持默认设置，最后完成安装。

步骤2：使用idoo工具加密文件
　　2.1打开桌面上的“idoo File Encryption Pro 5.6”软件，会弹出密码登录页面，输入111111后登录软件。
　　2.2在桌面新建一个txt文档，命名为hongya，并输入信息“123456”保存
　　2.3在IdooFileEncryption运行界面中选择“Lock Files”，再点击“Add Files”，选择刚才创建的“hongya”文件，如下图所示：
　　2.4选择完文件后，在工具主界面点击“Lock Files”，进行加密，打开桌面文件查看，出现拒绝访问。

步骤3：使用idoo工具解密文件
　　3.1返回“IdooFileEncryption”运行界面，勾选已将加密的文件，点击“Unlock Files”选项，进行文件的解密。

### 测验8

1.【填空题】在本实验中我们使用IdooFileEncryption文件解密后，查看hongya.txt文件得到内容是___。
正确答案：123456

1.【单选题】（）是指保证系统中的数据不被无关人员识别。
D、保密性

2.【单选题】下列选项中哪些是文件加密的方法（）？
A、利用Windows自带的“磁盘管理”组件也可以实现硬盘隐藏。
B、利用WinRAR等工具可以比较安全地为你的数据加密。
C、透明加解密技术。

3.【单选题】数据在存储或传输时不被修改、破坏，或数据包的丢失、乱序等指的是( )?
A、数据完整性

4.【单选题】关于加密技术，下列错误的是（）？
A、对称密码体制中加密算法和解密算法是保密的

5.【单选题】信息安全风险缺口是指（）
C、IT 的发展与安全投入，安全意识和安全手段的不平衡
